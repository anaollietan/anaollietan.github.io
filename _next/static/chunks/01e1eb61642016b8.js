(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74059,e=>{"use strict";var s=e.i(43476),r=e.i(71645),l=e.i(51219),t=e.i(85369),o=e.i(11110);function a(){let{t:e}=(0,o.useLanguage)(),[a,i]=(0,r.useState)([]),[n,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[m,g]=(0,r.useState)([]),[h,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{b()},[]);let b=()=>{i(t.userStorage.getAll())},f=Object.values(l.UserAction);return(0,s.jsxs)("div",{className:"h-full overflow-y-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:e("page.user_roles.title")}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:e("user_roles.form.title")}),(0,s.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),!n||!c||0===m.length)return void alert(e("user_roles.error.required_fields"));let r={UserId:n,Role:c,Actions:m};h?(t.userRoleStorage.update(h,r),alert(e("user_roles.success.role_updated"))):(t.userRoleStorage.create(r),alert(e("user_roles.success.role_assigned"))),d(""),u(""),g([]),x(null)},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"user",className:"block text-sm font-medium text-gray-700 mb-1",children:[e("user_roles.form.select_user")," *"]}),(0,s.jsxs)("select",{id:"user",value:n,onChange:e=>(e=>{if(d(e),e){let s=t.userRoleStorage.getByUserId(e);if(s.length>0){let e=s[0];u((e=>{for(let[s,r]of Object.entries(l.RoleDefaultActions))if(r.every(s=>e.includes(s)))return s;return""})(e.Actions)||e.Role),g(e.Actions),x(e.Id)}else u(""),g([]),x(null)}else u(""),g([]),x(null)})(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,s.jsx)("option",{value:"",children:e("user_roles.form.choose_user")}),a.map(e=>(0,s.jsxs)("option",{value:e.Id,children:[e.Name," (",e.Email,")"]},e.Id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:[e("user_roles.form.select_role")," *"]}),(0,s.jsxs)("select",{id:"role",value:c,onChange:e=>{var s;u(s=e.target.value),s?g(l.RoleDefaultActions[s]):g([])},required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,s.jsx)("option",{value:"",children:e("user_roles.form.choose_role")}),(0,s.jsx)("option",{value:l.Role.PE,children:e("role.pe")}),(0,s.jsx)("option",{value:l.Role.RMA,children:e("role.rma")}),(0,s.jsx)("option",{value:l.Role.Shipping,children:e("role.shipping")}),(0,s.jsx)("option",{value:l.Role.Warehouse,children:e("role.warehouse")})]})]}),(0,s.jsx)("button",{type:"submit",disabled:!n||!c||0===m.length,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",children:e("button.submit")})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:e("user_roles.actions.title")}),c?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e("user_roles.actions.description")}),f.map(r=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:`action-${r}`,checked:m.includes(r),onChange:()=>{g(e=>e.includes(r)?e.filter(e=>e!==r):[...e,r])},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,s.jsx)("label",{htmlFor:`action-${r}`,className:"ml-3 text-sm font-medium text-gray-900 cursor-pointer",children:e(`user_action.${r.toLowerCase()}`)})]},r)),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e("user_roles.actions.selected_count"),": ",(0,s.jsx)("span",{className:"font-medium text-gray-900",children:m.length})]})})]}):(0,s.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e("user_roles.actions.select_role_first")})})]})]})]})}e.s(["default",()=>a])}]);