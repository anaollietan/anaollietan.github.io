(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20995,e=>{"use strict";var t,a=((t={}).Available="Available",t.CheckedOut="CheckedOut",t.Deactivated="Deactivated",t);e.s(["EquipmentStatus",()=>a])},33209,e=>{"use strict";var t,a,l=e.i(43476),s=e.i(71645),n=((t={}).Calibration="Calibration",t.Inspection="Inspection",t),r=((a={}).Scheduled="Scheduled",a.InProgress="InProgress",a.Completed="Completed",a.Cancelled="Cancelled",a),d=e.i(20995),i=e.i(85369),c=e.i(11110);function u({editingItem:e,equipment:t,users:a,onSubmit:i,onCancel:u}){let{t:o}=(0,c.useLanguage)(),m=a.find(e=>"Ollie Tan"===e.Name),x=m?.Id||"",[p,h]=(0,s.useState)({UserId:x,EquipmentId:"",ScheduledStartAt:new Date().toISOString().slice(0,16),ScheduledEndAt:new Date(Date.now()+72e5).toISOString().slice(0,16),StartedAt:null,EndedAt:null,Type:n.Inspection,Note:"",Status:r.Scheduled,RemindBefore:7,MeasuredValue:"",AcceptableMinValue:"",AcceptableMaxValue:""}),g=!!e,b=g&&e.Status!==r.Scheduled;(0,s.useEffect)(()=>{e?h({UserId:e.UserId,EquipmentId:e.EquipmentId,ScheduledStartAt:e.ScheduledStartAt,ScheduledEndAt:e.ScheduledEndAt,StartedAt:e.StartedAt,EndedAt:e.EndedAt,Type:e.Type,Note:e.Note,Status:e.Status,RemindBefore:e.RemindBefore,MeasuredValue:e.MeasuredValue,AcceptableMinValue:e.AcceptableMinValue,AcceptableMaxValue:e.AcceptableMaxValue}):h({UserId:x,EquipmentId:"",ScheduledStartAt:new Date().toISOString().slice(0,16),ScheduledEndAt:new Date(Date.now()+72e5).toISOString().slice(0,16),StartedAt:null,EndedAt:null,Type:n.Inspection,Note:"",Status:r.Scheduled,RemindBefore:7,MeasuredValue:"",AcceptableMinValue:"",AcceptableMaxValue:""})},[e,x]);let f=e=>{let{name:t,value:a}=e.target;h(e=>({...e,[t]:"RemindBefore"===t?Number(a):a}))},v=t.filter(t=>t.Status===d.EquipmentStatus.Available||e&&t.Id===e.EquipmentId);return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 overflow-y-auto max-h-[calc(100vh-12rem)]",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:o(e?"event.form.title.edit":"event.form.title.add")}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(p)},className:"space-y-4",children:[(0,l.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:o("event.form.section.details")}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"UserId",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.user_required")}),(0,l.jsxs)("select",{id:"UserId",name:"UserId",value:p.UserId,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,l.jsx)("option",{value:"",children:o("placeholder.select_user")}),a.map(e=>(0,l.jsx)("option",{value:e.Id,children:e.Name},e.Id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"EquipmentId",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.equipment_required")}),(0,l.jsxs)("select",{id:"EquipmentId",name:"EquipmentId",value:p.EquipmentId,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,l.jsx)("option",{value:"",children:o("placeholder.select_equipment")}),v.map(e=>(0,l.jsxs)("option",{value:e.Id,children:[e.Name," (",e.SerialNumber,")"]},e.Id))]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"ScheduledStartAt",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.scheduled_start")}),(0,l.jsx)("input",{type:"datetime-local",id:"ScheduledStartAt",name:"ScheduledStartAt",value:p.ScheduledStartAt,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"ScheduledEndAt",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.scheduled_end")}),(0,l.jsx)("input",{type:"datetime-local",id:"ScheduledEndAt",name:"ScheduledEndAt",value:p.ScheduledEndAt,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"Type",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.event_type")}),(0,l.jsxs)("select",{id:"Type",name:"Type",value:p.Type,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,l.jsx)("option",{value:n.Calibration,children:o("event_type.calibration")}),(0,l.jsx)("option",{value:n.Inspection,children:o("event_type.inspection")})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"RemindBefore",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.remind_before")}),(0,l.jsx)("input",{type:"number",id:"RemindBefore",name:"RemindBefore",value:p.RemindBefore,onChange:f,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"Note",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.note")}),(0,l.jsx)("textarea",{id:"Note",name:"Note",value:p.Note,onChange:f,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:o("placeholder.enter_notes")})]})]})]}),g&&b&&(0,l.jsxs)("div",{className:"pt-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:o("event.form.section.measurement")}),(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"MeasuredValue",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.measured_value")}),(0,l.jsx)("input",{type:"text",id:"MeasuredValue",name:"MeasuredValue",value:p.MeasuredValue,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:o("placeholder.measured_value")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"AcceptableMinValue",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.min_acceptable")}),(0,l.jsx)("input",{type:"text",id:"AcceptableMinValue",name:"AcceptableMinValue",value:p.AcceptableMinValue,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:o("placeholder.min_value")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"AcceptableMaxValue",className:"block text-sm font-medium text-gray-700 mb-1",children:o("event.form.max_acceptable")}),(0,l.jsx)("input",{type:"text",id:"AcceptableMaxValue",name:"AcceptableMaxValue",value:p.AcceptableMaxValue,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:o("placeholder.max_value")})]})]})})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium",children:o(e?"button.update":"button.schedule")}),e&&(0,l.jsx)("button",{type:"button",onClick:u,className:"px-6 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors font-medium",children:o("button.cancel")})]})]})]})}function o({items:e,equipment:t,users:a,onEdit:d,onStart:i,onComplete:u}){let{t:o}=(0,c.useLanguage)(),[m,x]=(0,s.useState)(null),p=e=>e?new Date(e).toLocaleString():"-",h=(e,t,a)=>{if(!e||!t||!a)return null;let l=parseFloat(e),s=parseFloat(t),n=parseFloat(a);return isNaN(l)||isNaN(s)||isNaN(n)?null:l>=s&&l<=n};return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o("event.table.header.equipment")}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o("event.table.header.type")}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o("event.table.header.user")}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o("event.table.header.scheduled_start")}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o("event.table.header.scheduled_end")}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o("event.table.header.status")}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o("event.table.header.actions")})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:o("event.table.empty")})}):e.map(e=>{var c,g,b,f;let v,y,j,N,S;return(0,l.jsxs)(s.default.Fragment,{children:[(0,l.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>d(e),children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(c=e.EquipmentId,(v=t.find(e=>e.Id===c))?`${v.Name} (${v.SerialNumber})`:o("event.table.unknown"))}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(g=e.Type,y={[n.Calibration]:"bg-purple-100 text-purple-800",[n.Inspection]:"bg-blue-100 text-blue-800"},(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y[g]}`,children:g}))}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(b=e.UserId,(j=a.find(e=>e.Id===b))?j.Name:o("event.table.unknown"))}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p(e.ScheduledStartAt)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p(e.ScheduledEndAt)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(f=e.Status,N={[r.Scheduled]:"bg-gray-100 text-gray-800",[r.InProgress]:"bg-blue-100 text-blue-800",[r.Completed]:"bg-green-100 text-green-800",[r.Cancelled]:"bg-red-100 text-red-800"},S={[r.Scheduled]:o("event_status.scheduled"),[r.InProgress]:o("event_status.in_progress"),[r.Completed]:o("event_status.completed"),[r.Cancelled]:o("event_status.cancelled")},(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N[f]}`,children:S[f]}))}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[e.Status===r.Scheduled&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),i(e.Id)},className:"bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-700 transition-colors text-xs font-medium",children:o("button.start")}),e.Status===r.InProgress&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),u(e.Id)},className:"bg-green-600 text-white px-3 py-1 rounded-md hover:bg-green-700 transition-colors text-xs font-medium",children:o("button.complete")}),(0,l.jsx)("button",{onClick:t=>{var a;return a=e.Id,void(t.stopPropagation(),x(m===a?null:a))},className:"text-blue-600 hover:text-blue-800 font-medium text-xs",children:m===e.Id?o("button.hide"):o("button.details")})]})})]}),m===e.Id&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:7,className:"px-6 py-4 bg-gray-50",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-6 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-700 mb-3",children:o("event.table.details.scheduling_info")}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:o("event.table.details.scheduled_start")})," ",p(e.ScheduledStartAt)]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:o("event.table.details.scheduled_end")})," ",p(e.ScheduledEndAt)]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:o("event.table.details.remind_before")})," ",e.RemindBefore," ",o("event.table.details.days")]}),e.Note&&(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("span",{className:"font-medium",children:o("event.table.details.note")}),(0,l.jsx)("p",{className:"text-gray-600 mt-1",children:e.Note})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-700 mb-3",children:o("event.table.details.execution")}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:o("event.table.details.started_at")})," ",p(e.StartedAt)]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:o("event.table.details.ended_at")})," ",p(e.EndedAt)]}),(e.MeasuredValue||e.AcceptableMinValue||e.AcceptableMaxValue)&&(0,l.jsxs)("div",{className:"mt-3 p-3 bg-white rounded border border-gray-200",children:[(0,l.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:o("event.table.details.measurement")}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:o("event.table.details.measured")}),(0,l.jsx)("span",{className:`ml-2 ${!0===h(e.MeasuredValue,e.AcceptableMinValue,e.AcceptableMaxValue)?"text-green-600 font-semibold":!1===h(e.MeasuredValue,e.AcceptableMinValue,e.AcceptableMaxValue)?"text-red-600 font-semibold":"text-gray-900"}`,children:e.MeasuredValue||"-"})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:o("event.table.details.min_acceptable")})," ",e.AcceptableMinValue||"-"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:o("event.table.details.max_acceptable")})," ",e.AcceptableMaxValue||"-"]}),!0===h(e.MeasuredValue,e.AcceptableMinValue,e.AcceptableMaxValue)&&(0,l.jsx)("p",{className:"text-green-600 text-xs mt-1",children:o("event.table.details.within_range")}),!1===h(e.MeasuredValue,e.AcceptableMinValue,e.AcceptableMaxValue)&&(0,l.jsx)("p",{className:"text-red-600 text-xs mt-1",children:o("event.table.details.outside_range")})]})]})]})]})]})})},`${e.Id}-details`)]},e.Id)})})]})})})}function m({statusFilter:e,userFilter:t,startedAfter:a,endedAfter:s,users:n,onStatusFilterChange:d,onUserFilterChange:i,onStartedAfterChange:u,onEndedAfterChange:o,onReset:m}){let x,{t:p}=(0,c.useLanguage)(),h=[{value:"All",label:p("event.filter.all_status")},{value:r.Scheduled,label:p("event_status.scheduled")},{value:r.InProgress,label:p("event_status.in_progress")},{value:r.Completed,label:p("event_status.completed")},{value:r.Cancelled,label:p("event_status.cancelled")}],g=(e,t)=>e?`${t}: ${p("event.filter.after")} ${new Date(e).toLocaleDateString()}`:`${t}: ${p("event.filter.any")}`,b=()=>"All"===e&&""===t&&""===a&&""===s;return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-end gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,l.jsx)("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:p("event.filter.status")}),(0,l.jsx)("select",{id:"status-filter",value:e,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:h.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,l.jsx)("label",{htmlFor:"user-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:p("event.filter.user")}),(0,l.jsxs)("select",{id:"user-filter",value:t,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,l.jsx)("option",{value:"",children:p("event.filter.all_users")}),n.map(e=>(0,l.jsx)("option",{value:e.Id,children:e.Name},e.Id))]})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,l.jsx)("label",{htmlFor:"started-after-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:p("event.filter.started_after")}),(0,l.jsx)("input",{type:"date",id:"started-after-filter",value:a,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,l.jsx)("label",{htmlFor:"ended-after-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:p("event.filter.ended_after")}),(0,l.jsx)("input",{type:"date",id:"ended-after-filter",value:s,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{onClick:m,disabled:b(),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${b()?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"}`,children:p("button.reset_filters")})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:p("event.filter.active")}),(0,l.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:(x=h.find(t=>t.value===e))?x.label:e}),(0,l.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:(e=>{if(!e)return p("event.filter.all_users");let t=n.find(t=>t.Id===e);return t?t.Name:p("event.filter.all_users")})(t)}),(0,l.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:g(a,p("event.filter.started_prefix"))}),(0,l.jsx)("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium",children:g(s,p("event.filter.ended_prefix"))})]})]})}function x(){let{t:e}=(0,c.useLanguage)(),[t,a]=(0,s.useState)([]),[n,x]=(0,s.useState)([]),[p,h]=(0,s.useState)([]),[g,b]=(0,s.useState)(null),[f,v]=(0,s.useState)(0),[y,j]=(0,s.useState)("All"),[N,S]=(0,s.useState)(""),[A,w]=(0,s.useState)(""),[I,C]=(0,s.useState)("");(0,s.useEffect)(()=>{_()},[]);let _=()=>{let e=i.eventStorage.getAll(),t=i.equipmentStorage.getAll(),l=i.userStorage.getAll();e.sort((e,t)=>new Date(t.ScheduledStartAt).getTime()-new Date(e.ScheduledStartAt).getTime()),a(e),x(t),h(l)},E=t.filter(e=>{let t="All"===y||e.Status===y,a=!N||e.UserId===N,l=!A||e.StartedAt&&new Date(e.StartedAt)>=new Date(A),s=!I||e.EndedAt&&new Date(e.EndedAt)>=new Date(I);return t&&a&&l&&s});return(0,l.jsxs)("div",{className:"h-full overflow-y-auto",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:e("page.event.title")}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsx)(u,{editingItem:g,equipment:n,users:p,onSubmit:e=>{if(g)i.eventStorage.update(g.Id,e),b(null);else{i.eventStorage.create(e);let t=i.equipmentStorage.getById(e.EquipmentId);t&&i.equipmentStorage.update(e.EquipmentId,{...t,Status:d.EquipmentStatus.CheckedOut}),v(e=>e+1)}_()},onCancel:()=>{b(null)}},f)}),(0,l.jsxs)("div",{className:"lg:col-span-2 overflow-auto",children:[(0,l.jsx)(m,{statusFilter:y,userFilter:N,startedAfter:A,endedAfter:I,users:p,onStatusFilterChange:j,onUserFilterChange:S,onStartedAfterChange:w,onEndedAfterChange:C,onReset:()=>{j("All"),S(""),w(""),C("")}}),(0,l.jsx)(o,{items:E,equipment:n,users:p,onEdit:e=>{b(e)},onStart:e=>{let t=i.eventStorage.getById(e);if(t){let a={...t,Status:r.InProgress,StartedAt:new Date().toISOString().slice(0,16)};i.eventStorage.update(e,a);let l={UserId:a.UserId,EquipmentId:a.EquipmentId,CheckedOutAt:new Date().toISOString(),CheckedInAt:null,ReferenceType:"Event",ReferenceId:e};i.checkoutLogStorage.create(l),_(),g?.Id===e&&b({...t,Status:r.InProgress,StartedAt:a.StartedAt})}},onComplete:e=>{let t=i.eventStorage.getById(e);if(t){let a={...t,Status:r.Completed,EndedAt:new Date().toISOString().slice(0,16)};i.eventStorage.update(e,a),i.checkoutLogStorage.checkInByReferenceId(e);let l=i.equipmentStorage.getById(t.EquipmentId);l&&i.equipmentStorage.update(t.EquipmentId,{...l,Status:d.EquipmentStatus.Available}),_(),g?.Id===e&&b({...t,Status:r.Completed,EndedAt:a.EndedAt})}}})]})]})]})}e.s(["default",()=>x],33209)}]);