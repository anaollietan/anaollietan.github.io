(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},84785,e=>{"use strict";var t,a,n,r=e.i(43476),d=e.i(71645),i=e.i(18566),s=e.i(85369),l=e.i(11110),c=((t={}).Calibration="Calibration",t.Inspection="Inspection",t),m=((a={}).EveryWeek="EveryWeek",a.EveryMonth="EveryMonth",a.EveryMonday="EveryMonday",a.EveryTuesday="EveryTuesday",a.EveryWednesday="EveryWednesday",a.EveryThursday="EveryThursday",a.EveryFriday="EveryFriday",a.EverySaturday="EverySaturday",a.EverySunday="EverySunday",a),o=((n={}).Number="Number",n.String="String",n.DateTime="DateTime",n.Bool="Bool",n);function u({editingItem:e,onSubmit:t,onCancel:a}){let{t:n}=(0,l.useLanguage)(),[i,s]=(0,d.useState)({Name:"",Type:c.Calibration,Frequency:m.EveryWeek,MaintenanceTime:"09:00",RemindBefore:1,Enabled:!0});(0,d.useEffect)(()=>{e?s({Name:e.Name,Type:e.Type,Frequency:e.Frequency,MaintenanceTime:e.MaintenanceTime,RemindBefore:e.RemindBefore,Enabled:e.Enabled}):s({Name:"",Type:c.Calibration,Frequency:m.EveryWeek,MaintenanceTime:"09:00",RemindBefore:1,Enabled:!0})},[e]);let o=e=>{let{name:t,value:a,type:n}=e.target;if("checkbox"===n){let a=e.target.checked;s(e=>({...e,[t]:a}))}else"RemindBefore"===t?s(e=>({...e,[t]:parseInt(a)||0})):s(e=>({...e,[t]:a}))};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:n(e?"maintenance_header.form.title.edit":"maintenance_header.form.title.add")}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(i),s({Name:"",Type:c.Calibration,Frequency:m.EveryWeek,MaintenanceTime:"09:00",RemindBefore:1,Enabled:!0})},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"Name",className:"block text-sm font-medium text-gray-700 mb-1",children:[n("form.name")," *"]}),(0,r.jsx)("input",{type:"text",id:"Name",name:"Name",value:i.Name,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:n("placeholder.enter_name")})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"Type",className:"block text-sm font-medium text-gray-700 mb-1",children:[n("maintenance_header.form.type")," *"]}),(0,r.jsxs)("select",{id:"Type",name:"Type",value:i.Type,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,r.jsx)("option",{value:c.Calibration,children:n("maintenance_type.calibration")}),(0,r.jsx)("option",{value:c.Inspection,children:n("maintenance_type.inspection")})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"Frequency",className:"block text-sm font-medium text-gray-700 mb-1",children:[n("maintenance_header.form.frequency")," *"]}),(0,r.jsxs)("select",{id:"Frequency",name:"Frequency",value:i.Frequency,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,r.jsx)("option",{value:m.EveryWeek,children:n("frequency.every_week")}),(0,r.jsx)("option",{value:m.EveryMonth,children:n("frequency.every_month")}),(0,r.jsx)("option",{value:m.EveryMonday,children:n("frequency.every_monday")}),(0,r.jsx)("option",{value:m.EveryTuesday,children:n("frequency.every_tuesday")}),(0,r.jsx)("option",{value:m.EveryWednesday,children:n("frequency.every_wednesday")}),(0,r.jsx)("option",{value:m.EveryThursday,children:n("frequency.every_thursday")}),(0,r.jsx)("option",{value:m.EveryFriday,children:n("frequency.every_friday")}),(0,r.jsx)("option",{value:m.EverySaturday,children:n("frequency.every_saturday")}),(0,r.jsx)("option",{value:m.EverySunday,children:n("frequency.every_sunday")})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"MaintenanceTime",className:"block text-sm font-medium text-gray-700 mb-1",children:[n("maintenance_header.form.maintenance_time")," *"]}),(0,r.jsx)("input",{type:"time",id:"MaintenanceTime",name:"MaintenanceTime",value:i.MaintenanceTime,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"RemindBefore",className:"block text-sm font-medium text-gray-700 mb-1",children:[n("maintenance_header.form.remind_before")," (",n("maintenance_header.form.days"),") *"]}),(0,r.jsx)("input",{type:"number",id:"RemindBefore",name:"RemindBefore",value:i.RemindBefore,onChange:o,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"Enabled",name:"Enabled",checked:i.Enabled,onChange:o,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,r.jsx)("label",{htmlFor:"Enabled",className:"ml-2 text-sm font-medium text-gray-700",children:n("maintenance_header.form.enabled")})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium",children:n(e?"button.update":"button.create")}),e&&(0,r.jsx)("button",{type:"button",onClick:a,className:"px-6 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors font-medium",children:n("button.cancel")})]})]})]})}function x({items:e,onEdit:t}){let{t:a}=(0,l.useLanguage)();return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("form.name")}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("maintenance_header.table.header.type")}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("maintenance_header.table.header.frequency")}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("maintenance_header.table.header.time")}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("maintenance_header.table.header.remind_before")}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("form.status")})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:a("maintenance_header.table.empty")})}):e.map(e=>{let n,d,i;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t(e),children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.Name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(n=e.Type,a(`maintenance_type.${n.toLowerCase()}`))}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(d=e.Frequency.replace(/([A-Z])/g,"_$1").toLowerCase().substring(1),a(`frequency.${d}`))}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.MaintenanceTime}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.RemindBefore," ",a("maintenance_header.form.days")]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(i=e.Enabled,(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i?a("maintenance_header.status.enabled"):a("maintenance_header.status.disabled")}))})]},e.Id)})})]})})})}function y({details:e,editingDetail:t,onAddDetail:a,onUpdateDetail:n,onDeleteDetail:i,onEditDetail:s,onCancelEdit:c}){let{t:m}=(0,l.useLanguage)(),[u,x]=(0,d.useState)({Key:"",DataType:o.String,Required:!1});(0,d.useEffect)(()=>{t?x({Key:t.Key,DataType:t.DataType,Required:t.Required}):x({Key:"",DataType:o.String,Required:!1})},[t]);let y=e=>{let{name:t,value:a,type:n}=e.target;if("checkbox"===n){let a=e.target.checked;x(e=>({...e,[t]:a}))}else x(e=>({...e,[t]:a}))};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:m("maintenance_header.details.title")}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t?n(t.Id,u):a(u),x({Key:"",DataType:o.String,Required:!1})},className:"space-y-4 mb-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"Key",className:"block text-sm font-medium text-gray-700 mb-1",children:[m("maintenance_header.details.key")," *"]}),(0,r.jsx)("input",{type:"text",id:"Key",name:"Key",value:u.Key,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:m("placeholder.enter_key")})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"DataType",className:"block text-sm font-medium text-gray-700 mb-1",children:[m("maintenance_header.details.data_type")," *"]}),(0,r.jsxs)("select",{id:"DataType",name:"DataType",value:u.DataType,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,r.jsx)("option",{value:o.String,children:m("data_type.string")}),(0,r.jsx)("option",{value:o.Number,children:m("data_type.number")}),(0,r.jsx)("option",{value:o.DateTime,children:m("data_type.datetime")}),(0,r.jsx)("option",{value:o.Bool,children:m("data_type.bool")})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"Required",name:"Required",checked:u.Required,onChange:y,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,r.jsx)("label",{htmlFor:"Required",className:"ml-2 text-sm font-medium text-gray-700",children:m("maintenance_header.details.required")})]})})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium text-sm",children:t?m("button.update"):m("maintenance_header.details.add_detail")}),t&&(0,r.jsx)("button",{type:"button",onClick:c,className:"bg-gray-500 text-white py-2 px-4 rounded-md hover:bg-gray-600 transition-colors font-medium text-sm",children:m("button.cancel")})]})]}),e.length>0&&(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:m("maintenance_header.details.key")}),(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:m("maintenance_header.details.data_type")}),(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:m("maintenance_header.details.required")}),(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:m("button.actions")})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>s(e),children:[(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:e.Key}),(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:m(`data_type.${e.DataType.toLowerCase()}`)}),(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.Required?(0,r.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium",children:m("maintenance_header.details.yes")}):(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium",children:m("maintenance_header.details.no")})}),(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),i(e.Id)},className:"text-red-600 hover:text-red-800 font-medium",children:m("button.delete")})})]},e.Id))})]})})]})}function p({equipment:e,equipmentModels:t,linkedEquipment:a,onLinkEquipment:n,onUnlinkEquipment:i}){let{t:s}=(0,l.useLanguage)(),[c,m]=(0,d.useState)(""),o=e=>a.some(t=>t.EquipmentId===e),u=c?e.filter(e=>e.ModelId===c):e,x=a.length;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:s("maintenance_header.equipment_linkage.title")}),x>0&&(0,r.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[x," ",1===x?"equipment":"equipments"," linked"]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"model-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:s("maintenance_header.equipment_linkage.filter_by_model")}),(0,r.jsxs)("select",{id:"model-filter",value:c,onChange:e=>m(e.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,r.jsx)("option",{value:"",children:s("maintenance_header.equipment_linkage.all_models")}),t.map(e=>(0,r.jsxs)("option",{value:e.Id,children:[e.Name," (",e.ModelNumber,")"]},e.Id))]})]}),0===u.length?(0,r.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:s("maintenance_header.equipment_linkage.no_equipment")})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:u.map(e=>{var a;let d;return(0,r.jsxs)("div",{className:`flex items-start p-3 border rounded-lg transition-all ${o(e.Id)?"border-blue-400 bg-blue-50 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[(0,r.jsx)("input",{type:"checkbox",id:`equipment-${e.Id}`,checked:o(e.Id),onChange:t=>{t.target.checked?n(e.Id):i(e.Id)},className:"w-4 h-4 mt-1 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,r.jsxs)("label",{htmlFor:`equipment-${e.Id}`,className:"ml-3 cursor-pointer flex-1",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.Name}),(0,r.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:(a=e.ModelId,(d=t.find(e=>e.Id===a))?`${d.Name} (${d.ModelNumber})`:s("equipment.table.unknown"))}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:["SN: ",e.SerialNumber]})]})]},e.Id)})})]})}function h(){let{t:e}=(0,l.useLanguage)(),t=(0,i.useSearchParams)(),[a,n]=(0,d.useState)([]),[c,m]=(0,d.useState)([]),[o,h]=(0,d.useState)([]),[g,b]=(0,d.useState)(null),[f,j]=(0,d.useState)(null),[v,N]=(0,d.useState)([]),[w,_]=(0,d.useState)(null),[q,k]=(0,d.useState)([]),[E,S]=(0,d.useState)(null);(0,d.useEffect)(()=>{I();let e=t.get("edit"),a=t.get("equipment");if(e){let t=s.maintenanceHeaderStorage.getById(e);t&&D(t)}a&&S(a)},[]),(0,d.useEffect)(()=>{f?(T(f.Id),C(f.Id)):(N([]),k([]))},[f]);let I=()=>{let e=s.maintenanceHeaderStorage.getAll(),t=s.equipmentStorage.getAll(),a=s.equipmentModelStorage.getAll();n(e),m(t),h(a)},T=e=>{N(s.maintenanceDetailStorage.getByHeaderId(e))},C=e=>{k(s.maintenanceEquipmentLinkStorage.getByHeaderId(e))},D=e=>{b(e),j(e)};return(0,r.jsxs)("div",{className:"h-full overflow-y-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:e("page.maintenance_header.title")}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(u,{editingItem:g,onSubmit:e=>{if(g)s.maintenanceHeaderStorage.update(g.Id,e),b(null),f&&f.Id===g.Id&&j(s.maintenanceHeaderStorage.getById(g.Id)||null);else{let t=s.maintenanceHeaderStorage.create(e);if(j(t),E){let e={MaintenanceHeaderId:t.Id,EquipmentId:E};s.maintenanceEquipmentLinkStorage.create(e),S(null)}}I()},onCancel:()=>{b(null),j(null)}})}),(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsx)(x,{items:a,onEdit:D})})]}),f&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(y,{details:v,editingDetail:w,onAddDetail:e=>{f&&(s.maintenanceDetailStorage.create(f.Id,e),T(f.Id))},onUpdateDetail:(e,t)=>{s.maintenanceDetailStorage.update(e,t),f&&T(f.Id),_(null)},onDeleteDetail:e=>{s.maintenanceDetailStorage.delete(e),f&&T(f.Id)},onEditDetail:e=>{_(e)},onCancelEdit:()=>_(null)}),(0,r.jsx)(p,{equipment:c,equipmentModels:o,linkedEquipment:q,onLinkEquipment:e=>{if(f){let t={MaintenanceHeaderId:f.Id,EquipmentId:e};s.maintenanceEquipmentLinkStorage.create(t),C(f.Id)}},onUnlinkEquipment:e=>{f&&(s.maintenanceEquipmentLinkStorage.unlinkEquipment(f.Id,e),C(f.Id))}})]}),!f&&a.length>0&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:(0,r.jsx)("p",{className:"text-blue-800",children:e("maintenance_header.select_header_prompt")})})]})}function g(){return(0,r.jsx)(d.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(h,{})})}e.s(["default",()=>g],84785)}]);