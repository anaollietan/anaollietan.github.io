(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20995,e=>{"use strict";var t,l=((t={}).Available="Available",t.CheckedOut="CheckedOut",t.Deactivated="Deactivated",t);e.s(["EquipmentStatus",()=>l])},6211,e=>{"use strict";var t,l,a=((t={}).Calibration="Calibration",t.Inspection="Inspection",t),n=((l={}).Scheduled="Scheduled",l.InProgress="InProgress",l.Completed="Completed",l.Cancelled="Cancelled",l);e.s(["EventStatus",()=>n,"EventType",()=>a])},33209,e=>{"use strict";var t=e.i(43476),l=e.i(71645),a=e.i(20995),n=e.i(85369),d=e.i(11110),r=e.i(6211);function s({editingItem:e,equipment:n,users:s,onSubmit:u,onCancel:o}){let{t:i}=(0,d.useLanguage)(),c=s.find(e=>"Ollie Tan"===e.Name),m=c?.Id||"",[p,x]=(0,l.useState)({UserId:m,EquipmentId:"",ScheduledStartAt:new Date().toISOString().slice(0,16),ScheduledEndAt:new Date(Date.now()+72e5).toISOString().slice(0,16),StartedAt:null,EndedAt:null,Type:r.EventType.Inspection,Note:"",Status:r.EventStatus.Scheduled,RemindBefore:7,MeasuredValue:"",AcceptableMinValue:"",AcceptableMaxValue:""}),h=!!e,b=h&&e.Status!==r.EventStatus.Scheduled;(0,l.useEffect)(()=>{e?x({UserId:e.UserId,EquipmentId:e.EquipmentId,ScheduledStartAt:e.ScheduledStartAt,ScheduledEndAt:e.ScheduledEndAt,StartedAt:e.StartedAt,EndedAt:e.EndedAt,Type:e.Type,Note:e.Note,Status:e.Status,RemindBefore:e.RemindBefore,MeasuredValue:e.MeasuredValue,AcceptableMinValue:e.AcceptableMinValue,AcceptableMaxValue:e.AcceptableMaxValue}):x({UserId:m,EquipmentId:"",ScheduledStartAt:new Date().toISOString().slice(0,16),ScheduledEndAt:new Date(Date.now()+72e5).toISOString().slice(0,16),StartedAt:null,EndedAt:null,Type:r.EventType.Inspection,Note:"",Status:r.EventStatus.Scheduled,RemindBefore:7,MeasuredValue:"",AcceptableMinValue:"",AcceptableMaxValue:""})},[e,m]);let g=e=>{let{name:t,value:l}=e.target;x(e=>({...e,[t]:"RemindBefore"===t?Number(l):l}))},f=n.filter(t=>t.Status===a.EquipmentStatus.Available||e&&t.Id===e.EquipmentId);return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 overflow-y-auto max-h-[calc(100vh-12rem)]",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:i(e?"event.form.title.edit":"event.form.title.add")}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(p)},className:"space-y-4",children:[(0,t.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:i("event.form.section.details")}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"UserId",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.user_required")}),(0,t.jsxs)("select",{id:"UserId",name:"UserId",value:p.UserId,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,t.jsx)("option",{value:"",children:i("placeholder.select_user")}),s.map(e=>(0,t.jsx)("option",{value:e.Id,children:e.Name},e.Id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"EquipmentId",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.equipment_required")}),(0,t.jsxs)("select",{id:"EquipmentId",name:"EquipmentId",value:p.EquipmentId,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,t.jsx)("option",{value:"",children:i("placeholder.select_equipment")}),f.map(e=>(0,t.jsxs)("option",{value:e.Id,children:[e.Name," (",e.SerialNumber,")"]},e.Id))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"ScheduledStartAt",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.scheduled_start")}),(0,t.jsx)("input",{type:"datetime-local",id:"ScheduledStartAt",name:"ScheduledStartAt",value:p.ScheduledStartAt,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"ScheduledEndAt",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.scheduled_end")}),(0,t.jsx)("input",{type:"datetime-local",id:"ScheduledEndAt",name:"ScheduledEndAt",value:p.ScheduledEndAt,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"Type",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.event_type")}),(0,t.jsxs)("select",{id:"Type",name:"Type",value:p.Type,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,t.jsx)("option",{value:r.EventType.Calibration,children:i("event_type.calibration")}),(0,t.jsx)("option",{value:r.EventType.Inspection,children:i("event_type.inspection")})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"RemindBefore",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.remind_before")}),(0,t.jsx)("input",{type:"number",id:"RemindBefore",name:"RemindBefore",value:p.RemindBefore,onChange:g,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"Note",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.note")}),(0,t.jsx)("textarea",{id:"Note",name:"Note",value:p.Note,onChange:g,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:i("placeholder.enter_notes")})]})]})]}),h&&b&&(0,t.jsxs)("div",{className:"pt-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:i("event.form.section.measurement")}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"MeasuredValue",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.measured_value")}),(0,t.jsx)("input",{type:"text",id:"MeasuredValue",name:"MeasuredValue",value:p.MeasuredValue,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:i("placeholder.measured_value")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"AcceptableMinValue",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.min_acceptable")}),(0,t.jsx)("input",{type:"text",id:"AcceptableMinValue",name:"AcceptableMinValue",value:p.AcceptableMinValue,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:i("placeholder.min_value")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"AcceptableMaxValue",className:"block text-sm font-medium text-gray-700 mb-1",children:i("event.form.max_acceptable")}),(0,t.jsx)("input",{type:"text",id:"AcceptableMaxValue",name:"AcceptableMaxValue",value:p.AcceptableMaxValue,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:i("placeholder.max_value")})]})]})})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium",children:i(e?"button.update":"button.schedule")}),e&&(0,t.jsx)("button",{type:"button",onClick:o,className:"px-6 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors font-medium",children:i("button.cancel")})]})]})]})}function u(){let{t:e}=(0,d.useLanguage)(),[r,u]=(0,l.useState)([]),[o,i]=(0,l.useState)([]),[c,m]=(0,l.useState)(null),[p,x]=(0,l.useState)(0);(0,l.useEffect)(()=>{h();let e=new URLSearchParams(window.location.search).get("editId");if(e){let t=n.eventStorage.getById(e);t&&m(t)}},[]);let h=()=>{let e=n.equipmentStorage.getAll(),t=n.userStorage.getAll();u(e),i(t)};return(0,t.jsxs)("div",{className:"h-full overflow-y-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:e("page.event.title")}),(0,t.jsx)("div",{className:"max-w-2xl",children:(0,t.jsx)(s,{editingItem:c,equipment:r,users:o,onSubmit:e=>{if(c)n.eventStorage.update(c.Id,e),m(null);else{n.eventStorage.create(e);let t=n.equipmentStorage.getById(e.EquipmentId);t&&n.equipmentStorage.update(e.EquipmentId,{...t,Status:a.EquipmentStatus.CheckedOut}),x(e=>e+1)}h()},onCancel:()=>{m(null)}},p)})]})}e.s(["default",()=>u],33209)}]);