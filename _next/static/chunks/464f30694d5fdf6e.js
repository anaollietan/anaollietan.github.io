(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20995,e=>{"use strict";var t,s=((t={}).Available="Available",t.CheckedOut="CheckedOut",t.Deactivated="Deactivated",t);e.s(["EquipmentStatus",()=>s])},75476,e=>{"use strict";var t,s=e.i(43476),l=e.i(71645),r=((t={}).CheckedOut="CheckedOut",t.CheckedIn="CheckedIn",t),a=e.i(85369),n=e.i(20995);function d({editingItem:e,equipment:t,users:r,onSubmit:a,onCancel:d}){let c=r.find(e=>"Ollie Tan"===e.Name),i=c?.Id||"",[u,o]=(0,l.useState)({UserId:i,EquipmentId:"",CheckedOutAt:new Date().toISOString().slice(0,16),CheckedInAt:null,ReferenceType:"Manual",ReferenceId:""});(0,l.useEffect)(()=>{e?o({UserId:e.UserId,EquipmentId:e.EquipmentId,CheckedOutAt:e.CheckedOutAt.slice(0,16),CheckedInAt:e.CheckedInAt,ReferenceType:e.ReferenceType,ReferenceId:e.ReferenceId}):o({UserId:i,EquipmentId:"",CheckedOutAt:new Date().toISOString().slice(0,16),CheckedInAt:null,ReferenceType:"Manual",ReferenceId:""})},[e,i]);let m=e=>{let{name:t,value:s}=e.target;o(e=>({...e,[t]:s||("CheckedInAt"===t?null:s)}))},x=t.filter(e=>e.Status!==n.EquipmentStatus.Deactivated);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 overflow-y-auto max-h-[calc(100vh-12rem)]",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:e?"Edit Checkout Log":"Add Manual Checkout Log"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(u)},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"UserId",className:"block text-sm font-medium text-gray-700 mb-1",children:"User *"}),(0,s.jsxs)("select",{id:"UserId",name:"UserId",value:u.UserId,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,s.jsx)("option",{value:"",children:"Select user"}),r.map(e=>(0,s.jsx)("option",{value:e.Id,children:e.Name},e.Id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"EquipmentId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment *"}),(0,s.jsxs)("select",{id:"EquipmentId",name:"EquipmentId",value:u.EquipmentId,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,s.jsx)("option",{value:"",children:"Select equipment"}),x.map(e=>(0,s.jsxs)("option",{value:e.Id,children:[e.Name," (",e.SerialNumber,")"]},e.Id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"CheckedOutAt",className:"block text-sm font-medium text-gray-700 mb-1",children:"Checked Out At *"}),(0,s.jsx)("input",{type:"datetime-local",id:"CheckedOutAt",name:"CheckedOutAt",value:u.CheckedOutAt,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"ReferenceId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference Number"}),(0,s.jsx)("input",{type:"text",id:"ReferenceId",name:"ReferenceId",value:u.ReferenceId,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"ex. Work order number"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium",children:e?"Update":"Check out"}),e&&(0,s.jsx)("button",{type:"button",onClick:d,className:"px-6 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors font-medium",children:"Cancel"})]})]})]})}function c({items:e,equipment:t,users:l,onEdit:r,onCheckIn:a}){let n=e=>e?new Date(e).toLocaleString():"-";return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipment"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Checked Out At"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Checked In At"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No checkout logs found."})}):e.map(e=>{var d,c;let i,u;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>r(e),children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(d=e.EquipmentId,(i=t.find(e=>e.Id===d))?`${i.Name} (${i.SerialNumber})`:"Unknown")}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(c=e.UserId,(u=l.find(e=>e.Id===c))?u.Name:"Unknown")}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n(e.CheckedOutAt)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n(e.CheckedInAt)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.ReferenceType,": ",e.ReferenceId.slice(0,8),"..."]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.CheckedInAt?(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Checked In"}):(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Checked Out"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:!e.CheckedInAt&&(0,s.jsx)("button",{onClick:t=>{var s;return s=e.Id,void(t.stopPropagation(),confirm("Are you sure you want to check in this equipment?")&&a(s))},className:"bg-green-600 text-white px-3 py-1 rounded-md hover:bg-green-700 transition-colors text-xs font-medium",children:"Check In"})})]},e.Id)})})]})})})}function i({statusFilter:e,userFilter:t,users:l,onStatusFilterChange:a,onUserFilterChange:n,onReset:d}){let c,i=[{value:"All",label:"All Status"},{value:r.CheckedOut,label:"Checked Out"},{value:r.CheckedIn,label:"Checked In"}],u=()=>"All"===e&&""===t;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-end gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,s.jsx)("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsx)("select",{id:"status-filter",value:e,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:i.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,s.jsx)("label",{htmlFor:"user-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"User"}),(0,s.jsxs)("select",{id:"user-filter",value:t,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,s.jsx)("option",{value:"",children:"All Users"}),l.map(e=>(0,s.jsx)("option",{value:e.Id,children:e.Name},e.Id))]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:d,disabled:u(),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${u()?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"}`,children:"Reset Filters"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Active Filters:"}),(0,s.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:(c=i.find(t=>t.value===e))?c.label:e}),(0,s.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:(e=>{if(!e)return"All Users";let t=l.find(t=>t.Id===e);return t?t.Name:"All Users"})(t)})]})]})}function u(){let[e,t]=(0,l.useState)([]),[n,u]=(0,l.useState)([]),[o,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(null),[p,g]=(0,l.useState)(0),[f,b]=(0,l.useState)("All"),[y,j]=(0,l.useState)("");(0,l.useEffect)(()=>{k()},[]);let k=()=>{let e=a.checkoutLogStorage.getAll(),s=a.equipmentStorage.getAll(),l=a.userStorage.getAll();e.sort((e,t)=>new Date(t.CheckedOutAt).getTime()-new Date(e.CheckedOutAt).getTime()),t(e),u(s),m(l)},v=e.filter(e=>{let t=e.CheckedInAt?r.CheckedIn:r.CheckedOut,s="All"===f||t===f,l=!y||e.UserId===y;return s&&l});return(0,s.jsxs)("div",{className:"h-full overflow-y-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Checkout Log Management"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)(d,{editingItem:x,equipment:n,users:o,onSubmit:e=>{x?(a.checkoutLogStorage.update(x.Id,e),h(null)):(a.checkoutLogStorage.create(e),g(e=>e+1)),k()},onCancel:()=>{h(null)}},p)}),(0,s.jsxs)("div",{className:"lg:col-span-2 overflow-auto",children:[(0,s.jsx)(i,{statusFilter:f,userFilter:y,users:o,onStatusFilterChange:b,onUserFilterChange:j,onReset:()=>{b("All"),j("")}}),(0,s.jsx)(c,{items:v,equipment:n,users:o,onEdit:e=>{h(e)},onCheckIn:e=>{a.checkoutLogStorage.checkIn(e),k()}})]})]})]})}e.s(["default",()=>u],75476)}]);