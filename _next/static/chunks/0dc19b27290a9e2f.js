(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80144,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(85369),l=e.i(11110);function r({equipmentFilter:e,userFilter:a,startDateFilter:s,endDateFilter:r,equipment:n,users:i,onEquipmentFilterChange:d,onUserFilterChange:u,onStartDateFilterChange:o,onEndDateFilterChange:m,onReset:g}){let{t:x}=(0,l.useLanguage)(),c=()=>!e&&!a&&!s&&!r;return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-end gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,t.jsx)("label",{htmlFor:"equipment-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:x("usage_log.filter.equipment")}),(0,t.jsxs)("select",{id:"equipment-filter",value:e,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,t.jsx)("option",{value:"",children:x("usage_log.filter.all_equipment")}),n.map(e=>(0,t.jsx)("option",{value:e.Id,children:e.Name},e.Id))]})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,t.jsx)("label",{htmlFor:"user-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:x("usage_log.filter.user")}),(0,t.jsxs)("select",{id:"user-filter",value:a,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,t.jsx)("option",{value:"",children:x("usage_log.filter.all_users")}),i.map(e=>(0,t.jsx)("option",{value:e.Id,children:e.Name},e.Id))]})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,t.jsx)("label",{htmlFor:"start-date-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:x("usage_log.filter.start_date")}),(0,t.jsx)("input",{type:"date",id:"start-date-filter",value:s,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,t.jsx)("label",{htmlFor:"end-date-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:x("usage_log.filter.end_date")}),(0,t.jsx)("input",{type:"date",id:"end-date-filter",value:r,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{onClick:g,disabled:c(),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${c()?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500"}`,children:x("button.reset_filters")})})]}),!c()&&(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:x("usage_log.filter.active")}),e&&(0,t.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[x("usage_log.filter.equipment_prefix"),": ",(e=>{if(!e)return x("usage_log.filter.all_equipment");let t=n.find(t=>t.Id===e);return t?t.Name:x("usage_log.filter.all_equipment")})(e)]}),a&&(0,t.jsxs)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:[x("usage_log.filter.user_prefix"),": ",(e=>{if(!e)return x("usage_log.filter.all_users");let t=i.find(t=>t.Id===e);return t?t.Name:x("usage_log.filter.all_users")})(a)]}),s&&(0,t.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[x("usage_log.filter.from"),": ",new Date(s).toLocaleDateString()]}),r&&(0,t.jsxs)("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium",children:[x("usage_log.filter.to"),": ",new Date(r).toLocaleDateString()]})]})]})}function n({items:e,equipment:a,users:s}){let{t:r}=(0,l.useLanguage)();return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("usage_log.table.header.equipment_name")}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("usage_log.table.header.serial_number")}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("usage_log.table.header.reference_type")}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("usage_log.table.header.reference_number")}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("usage_log.table.header.user")}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("usage_log.table.header.timestamp")})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:r("usage_log.table.empty")})}):e.map(e=>{var l,n,i,d;let u,o,m;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(l=e.EquipmentId,(u=a.find(e=>e.Id===l))?u.Name:r("usage_log.table.unknown"))}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(n=e.EquipmentId,(o=a.find(e=>e.Id===n))?o.SerialNumber:r("usage_log.table.unknown"))}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(i=e.ReferenceType,(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{DN:"bg-blue-100 text-blue-800",WO:"bg-green-100 text-green-800"}[i]||"bg-gray-100 text-gray-800"}`,children:i}))}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:e.ReferenceNumber}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(d=e.UserId,(m=s.find(e=>e.Id===d))?m.Name:r("usage_log.table.unknown"))}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.Timestamp).toLocaleString()})]},e.Id)})})]})})})}function i(){let{t:e}=(0,l.useLanguage)(),[i,d]=(0,a.useState)([]),[u,o]=(0,a.useState)([]),[m,g]=(0,a.useState)([]),[x,c]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[y,j]=(0,a.useState)("");(0,a.useEffect)(()=>{N()},[]);let N=()=>{let e=s.usageLogStorage.getAll(),t=s.equipmentStorage.getAll(),a=s.userStorage.getAll();d(e),o(t),g(a)},w=i.filter(e=>{let t=!x||e.EquipmentId===x,a=!p||e.UserId===p,s=new Date(e.Timestamp),l=!h||s>=new Date(h),r=!y||s<=new Date(y+"T23:59:59");return t&&a&&l&&r});return(0,t.jsxs)("div",{className:"h-full overflow-y-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:e("page.usage_log.title")}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(r,{equipmentFilter:x,userFilter:p,startDateFilter:h,endDateFilter:y,equipment:u,users:m,onEquipmentFilterChange:c,onUserFilterChange:f,onStartDateFilterChange:b,onEndDateFilterChange:j,onReset:()=>{c(""),f(""),b(""),j("")}}),(0,t.jsx)(n,{items:w,equipment:u,users:m})]})]})}e.s(["default",()=>i],80144)}]);